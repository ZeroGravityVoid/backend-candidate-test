"# backend-candidate-test" 
"# backend-candidate-test" 
Тестовое задание на позицию backend-разработчик
Необходимо создать функционал для подгрузки excel файла (формат .xlsx) через API, для дальнейшей обработки и сохранения данных в БД. Требования php >= 8.1, slim 4, БД mariadb, для http запросов использовать guzzlehttp/guzzle, для работы с БД illuminate/database. Для логирования monolog/monolog. Все необходимое уже предустановлено в текущем репозитории, есть docker для поднятия сервера со всем необходимым для выполнения задачи.

Установка
Клонируйте проект и запустите make init

Задачи
1. Продумать архитектуру, связи, и создать 3 таблицы БД

Таблица объявлений

Дата расхода
Сумма расхода
ID объявления
Название объявления
ID кампании
ID группы
Показы
Клики
Таблица кампаний

ID кампании
Название кампании
Таблица групп

ID группы
Название группы
2. Реализовать модели для работы с этими таблицами

Пустые классы моделей для всех трех таблиц находятся /src/Models Ads.php, AdsAdset.php, AdsCampaign.php

В моделях нужно реализовать методы добавления одиночной записи, множественная вставка, удаление записи, обновление записи. Добавление/Удаления/Обновления при обработке файла, делать через созданные модели.

3. Реализовать route для подгрузки файла ads.xlsx

Файл находится /var/excel/ads.xlsx Настраиваем в src/Config/routes.php метод GET без параметров. Метод подгружает файл ads.xlsx

4. Реализовать скрипт обработки файла ads.xlsx

Класс скрипта находится src/Console/ImportCsvAds.php

Запуск скрипта php bin/app.php import-csv-ads либо через контейнер php

Подгружаем файл ads.xlsx через реализованный Вами route.
У скрипта 2 режима работы с таблицами, множественная вставка записей в БД и одиночная, пусть за это будет отвечать параметр fileProcessingMode (true/false)
Распаршиваем файл, и заносим данные в созданные Вами таблицы согласно выбранного режима.
Обязательно подключаем логирование, логируем ход работы скрипта (добавление групп/компаний/объявлений)
При реализации методов моделей не забываем, что данные не должны дублироваться, при повторном запуске обработки файла. Так же если я изменю Название (групп/кампаний/объявлений), дата расхода, сумма расхода, показы, клики в файле и повторно запущу скрипт, данные должны обновиться.
5. После выполнения задания, закинуть к себе репозиторий, скинуть ссылку на него и указать время выполнения задачи.
